"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6851],{6851:(S,d,i)=>{i.r(d),i.d(d,{BonSortieListPage:()=>B});var _=i(177),u=i(4341),m=i(5079),a=i(5873),r=i(9935),t=i(3953),g=i(8465),p=i(4796),h=i(9034);function f(c,l){if(1&c){const s=t.RV6();t.j41(0,"ion-card")(1,"ion-card-content",7)(2,"ion-text",8)(3,"h6",9),t.nrm(4,"ion-icon",10),t.EFF(5),t.k0s()(),t.j41(6,"ion-text",8)(7,"h6",9),t.nrm(8,"ion-icon",11),t.EFF(9," Date: "),t.j41(10,"span"),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"ion-text",8)(14,"h6",9),t.nrm(15,"ion-icon",12),t.EFF(16," Motif: "),t.j41(17,"span"),t.EFF(18),t.k0s()()(),t.j41(19,"ion-text",8)(20,"h6",9),t.nrm(21,"ion-icon",13),t.EFF(22),t.k0s()(),t.j41(23,"div",14)(24,"ion-button",15),t.bIt("click",function(){const o=t.eBV(s).$implicit,n=t.XpG();return t.Njj(n.printBonSortie(o.id))}),t.nrm(25,"ion-icon",16),t.k0s(),t.j41(26,"ion-button",17),t.nrm(27,"ion-icon",18),t.k0s(),t.j41(28,"ion-button",15),t.bIt("click",function(){const o=t.eBV(s).$implicit,n=t.XpG();return t.Njj(n.deleteBonSortie(o.id))}),t.nrm(29,"ion-icon",19),t.k0s(),t.j41(30,"ion-button",20),t.bIt("click",function(){t.eBV(s);const o=t.XpG();return t.Njj(o.goToAddDetail())}),t.nrm(31,"ion-icon",21),t.EFF(32," Detail "),t.k0s()()()()}if(2&c){const s=l.$implicit;t.R7$(5),t.SpI(" Bon Sortie n\xb0",s.id," "),t.R7$(6),t.JRh(t.i5U(12,4,s.dateSortie,"dd/MM/yyyy")),t.R7$(7),t.JRh(s.motif.title),t.R7$(4),t.SpI(" Utilisateur: ",s.utilisateur.username," ")}}let B=(()=>{var c;class l{constructor(e,o,n){this.router=e,this.authService=o,this.BonSortieService=n,this.bonSorties=[],this.filteredBonSorties=[],this.bonSortieToDelete=null,this.selectedBonSortie=null,this.infoMessage="",this.errorMessage="",(0,m.a)({calendar:a.BJj,print:a.yyV,document:a.AlX,clipboard:a.NsY,person:a.MVM,create:a.vtF,add:a.WQq,eye:a.y5U,trash:a.dco})}ngOnInit(){this.loadBonSorties()}loadBonSorties(){const e=this.authService.currentUserValue;e&&e.entrepot?this.BonSortieService.getBonSortiesByEntrepots(e.entrepot.entrepotId).subscribe(n=>{console.log("Donn\xe9es re\xe7ues:",n),0===n.length?(this.infoMessage="Aucun Bon Entrees trouv\xe9e pour cet Entrepot.",setTimeout(()=>this.infoMessage="",2e3)):(this.bonSorties=n,this.filteredBonSorties=n)},n=>{console.error("Erreur lors de la r\xe9cup\xe9ration des Bon Entrees:",n),this.errorMessage="Erreur lors de la r\xe9cup\xe9ration des Bon Entrees."}):this.errorMessage="Erreur: entrep\xf4t utilisateur non trouv\xe9"}applyFilter(e){const o=e.target.value.trim().toLowerCase();this.filteredBonSorties=this.bonSorties.filter(n=>n.motif&&n.motif.title&&n.motif.title.toLowerCase().includes(o))}deleteBonSortie(e){this.BonSortieService.deleteBonSortie(e).subscribe(()=>{this.bonSorties=this.bonSorties.filter(o=>o.id!==e),this.filteredBonSorties=this.filteredBonSorties.filter(o=>o.id!==e)})}printBonSortie(e){this.router.navigate(["/print-bon-sortie",e])}goToAddForm(){console.log("Navigation vers le formulaire"),this.router.navigate(["/bon-sortie-form"]),console.log("Navigation vers le Ok")}goToAddDetail(){this.router.navigate(["/bon-sortie-detail"])}hasRole(e){return this.authService.hasRole(e)}}return(c=l).\u0275fac=function(e){return new(e||c)(t.rXU(g.Ix),t.rXU(p.u),t.rXU(h.v))},c.\u0275cmp=t.VBU({type:c,selectors:[["app-bon-sortie-list"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[[3,"translucent"],["slot","start"],[1,"ion-padding"],[3,"click"],["slot","start","name","add-outline"],[1,"card-container"],[4,"ngFor","ngForOf"],["text-center",""],["color","primary"],[1,"large-bold-text"],["name","document"],["name","calendar"],["name","clipboard"],["name","person"],[1,"ion-text-center"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","print"],["fill","clear","color","primary"],["slot","icon-only","name","create"],["slot","icon-only","name","trash"],["fill","clear",3,"click"],["slot","icon-only","name","eye"]],template:function(e,o){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Liste des Bons de Sortie"),t.k0s(),t.j41(4,"ion-buttons",1),t.nrm(5,"ion-menu-button"),t.k0s()()(),t.j41(6,"ion-content",2)(7,"ion-button",3),t.bIt("click",function(){return o.goToAddForm()}),t.nrm(8,"ion-icon",4),t.EFF(9," Ajouter "),t.k0s(),t.j41(10,"div",5),t.DNE(11,f,33,7,"ion-card",6),t.k0s()()),2&e&&(t.Y8G("translucent",!0),t.R7$(11),t.Y8G("ngForOf",o.filteredBonSorties))},dependencies:[r.b_,r.IO,r.I9,r.QW,r.W9,r.eU,r.BC,r.MC,r.ai,_.MD,_.Sq,_.vh,u.YN,r.Jm,r.iq],styles:["ion-card[_ngcontent-%COMP%]{border-radius:12px;border-color:#1d0435;border-style:groove;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}ion-card[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:10px}.large-bold-text[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:800}@media (min-width: 768px){.card-container[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;justify-content:space-around}ion-card[_ngcontent-%COMP%]{width:45%}}span[_ngcontent-%COMP%]{color:#040406;font-size:1.4rem;font-weight:800}h6[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:14px;position:relative;margin-top:5px}"]}),l})()}}]);