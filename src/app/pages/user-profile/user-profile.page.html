<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Mon Profil</ion-title>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Mon Profil</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-list>
    <ion-card>
      <ion-card-header>
        <ion-card-title>Formulaire</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
          <ion-list>
            <ion-item>
              <ion-label position="floating">Nom d'utilisateur</ion-label>
              <ion-input
                [(ngModel)]="utilisateur.username"
                name="username"
                placeholder="Nom d'utilisateur"
                maxlength="20"
                required
                #username="ngModel"
                [ngClass]="{'input-invalid': username.invalid && (username.dirty || username.touched)}">
              </ion-input>
              <div *ngIf="username.invalid && (username.dirty || username.touched)" class="error-message">
                Nom d'utilisateur est requis.
              </div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Nouveau Mot de Passe</ion-label>
              <ion-input
                type="password"
                [(ngModel)]="newPassword"
                name="newPassword"
                minlength="8"
                maxlength="30"
                #newPasswordControl="ngModel">
              </ion-input>
              <div *ngIf="newPasswordControl.invalid && (newPasswordControl.dirty || newPasswordControl.touched)" class="error-message">
                Le mot de passe doit contenir au moins 8 caractères.
              </div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Confirmer le Mot de Passe</ion-label>
              <ion-input
                type="password"
                [(ngModel)]="confirmPassword"
                name="confirmPassword"
                minlength="8"
                maxlength="30"
                #confirmPasswordControl="ngModel">
              </ion-input>
              <div *ngIf="confirmPasswordControl.value !== newPassword && (confirmPasswordControl.dirty || confirmPasswordControl.touched)" class="error-message">
                Les mots de passe ne correspondent pas.
              </div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Email</ion-label>
              <ion-input
                type="email"
                [(ngModel)]="utilisateur.email"
                name="email"
                placeholder="email@domain.com"
                maxlength="30"
                required
                #email="ngModel"
                [ngClass]="{'input-invalid': email.invalid && (email.dirty || email.touched)}">
              </ion-input>
              <div *ngIf="email.invalid && (email.dirty || email.touched)" class="error-message">
                L'email est requis et doit être valide.
              </div>
            </ion-item>

            <ion-item>
              <ion-label position="floating">Téléphone</ion-label>
              <ion-input
                type="tel"
                [(ngModel)]="utilisateur.contact"
                name="contact"
                placeholder="88-88-88-88"
                maxlength="8"
                required
                #contact="ngModel"
                [ngClass]="{'input-invalid': contact.invalid && (contact.dirty || contact.touched)}">
              </ion-input>
              <div *ngIf="contact.invalid && (contact.dirty || contact.touched)" class="error-message">
                Le numéro de téléphone est requis.
              </div>
            </ion-item>

            <ion-button type="submit" expand="block" shape="round" class="ion-margin-top" [disabled]="profileForm.invalid">Sauvegarder</ion-button>
          </ion-list>
        </form>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>
